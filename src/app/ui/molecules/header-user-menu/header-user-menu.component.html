<button
  type="button"
  [matMenuTriggerFor]="userMenu"
  class="text-white font-medium text-sm md:text-base py-2 px-4 md:py-2.5 md:px-4 rounded-full transition-all duration-300 relative overflow-hidden flex items-center gap-3 hover:bg-white/10 hover:-translate-y-0.5 hover:shadow-md bg-transparent border-none cursor-pointer"
  aria-label="Abrir menu do usuário"
>
  <span class="w-9 h-9 rounded-full overflow-hidden bg-white/20 flex items-center justify-center ring-1 ring-white/30">
    <img
      *ngIf="userAvatarUrl; else avatarFallback"
      [src]="userAvatarUrl"
      [alt]="userName ? 'Foto de ' + userName : 'Foto de perfil'"
      class="w-full h-full object-cover"
      referrerpolicy="no-referrer"
    />
    <ng-template #avatarFallback>
      <span class="text-white font-semibold text-xs select-none">{{ userInitials }}</span>
    </ng-template>
  </span>
  <span class="max-w-[10rem] truncate">
    {{ userName || 'Perfil' }}
  </span>
  <mat-icon class="text-white/90 text-[20px] leading-[20px]">expand_more</mat-icon>
</button>

<mat-menu #userMenu="matMenu" xPosition="before">
  <button mat-menu-item (click)="profile.emit()">
    <mat-icon>person</mat-icon>
    <span>Meu perfil</span>
  </button>
  <button mat-menu-item (click)="settings.emit()">
    <mat-icon>settings</mat-icon>
    <span>Configurações</span>
  </button>
  <button mat-menu-item (click)="logout.emit()">
    <mat-icon>logout</mat-icon>
    <span>Sair</span>
  </button>
</mat-menu>

