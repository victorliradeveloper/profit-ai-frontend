<!-- Card do perfil (estilo semelhante ao mock) -->
<section class="w-full">
  <!-- input escondido: aberto ao clicar no avatar -->
  <input
    #profileImageInput
    type="file"
    accept="image/png,image/jpeg,image/webp"
    (change)="onSelectProfileImage($event)"
    [disabled]="isUploadingProfileImage"
    class="hidden bg-transparent" />

  <div class="w-full rounded-3xl overflow-hidden bg-[#10b780] mb-10 px-6 py-6 sm:px-10 sm:py-8">
    <div class="flex flex-col gap-6 sm:flex-row sm:items-center sm:justify-between">
      <!-- Left: Avatar + name/email -->
      <div class="flex items-center gap-6 min-w-0">
        <!-- Avatar -->
        <div class="relative shrink-0">
          <button
            type="button"
            class="relative group rounded-full focus:outline-none focus:ring-2 focus:ring-white/60 focus:ring-offset-2 focus:ring-offset-[#10b780]"
            (click)="!isUploadingProfileImage && profileImageInput.click()"
            (keydown.enter)="!isUploadingProfileImage && profileImageInput.click()"
            (keydown.space)="!isUploadingProfileImage && profileImageInput.click()"
            [disabled]="isUploadingProfileImage"
            aria-label="Alterar foto do perfil"
          >
            <div class="w-28 h-28 sm:w-32 sm:h-32 rounded-full overflow-hidden bg-black/35 flex items-center justify-center">
              <img
                *ngIf="displayedAvatarUrl; else avatarFallback"
                [src]="displayedAvatarUrl"
                alt="Foto do perfil"
                class="w-full h-full object-cover"
              />
              <ng-template #avatarFallback>
                <span class="text-2xl sm:text-3xl font-semibold text-white/80">{{ profileInitials }}</span>
              </ng-template>
            </div>

            <!-- Pencil button -->
            <span class="absolute -bottom-1 -right-1 w-11 h-11 rounded-full bg-black/65 border border-white/15 flex items-center justify-center shadow-lg group-hover:bg-black/75 transition-colors">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" class="w-5 h-5 text-white">
                <path
                  d="M16.862 4.487a2.25 2.25 0 0 1 3.182 3.182l-9.19 9.19a4.5 4.5 0 0 1-1.897 1.13l-3.045 1.015a.75.75 0 0 1-.949-.949l1.015-3.045a4.5 4.5 0 0 1 1.13-1.897l9.19-9.19Z"
                  stroke="currentColor"
                  stroke-width="1.8"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M15.75 5.25 18.75 8.25"
                  stroke="currentColor"
                  stroke-width="1.8"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
            </span>
          </button>

          <div
            *ngIf="profileImagePreviewUrl"
            class="absolute -top-2 -left-2 px-2.5 py-1 rounded-full bg-white/15 text-white/90 text-[11px] font-semibold border border-white/15 backdrop-blur"
          >
            Preview
          </div>
        </div>

        <!-- Name/email -->
        <div class="min-w-0">
          <h2 class="text-1xl sm:text-[20px] font-bold text-white/90 truncate">
            {{ userName || 'Usuário' }}
          </h2>
          <p class="text-white/70 truncate">
            {{ userEmail || '—' }}
          </p>

          <p class="mt-3 text-xs text-white/70">
            PNG/JPG/WEBP até 2MB
          </p>

          <div class="mt-3 space-y-2">
            <div *ngIf="isUploadingProfileImage" class="inline-flex items-center gap-2 text-xs text-white/80">
              <span class="inline-block w-3.5 h-3.5 border-2 border-white/70 border-t-transparent rounded-full animate-spin"></span>
              Salvando foto...
            </div>

            <div *ngIf="profileImageSuccessMessage" class="px-3 py-2 rounded-lg bg-white/10 border border-white/15 text-white/90 text-sm backdrop-blur">
              {{ profileImageSuccessMessage }}
            </div>
            <div *ngIf="profileImageErrorMessage" class="px-3 py-2 rounded-lg bg-white/10 border border-white/15 text-white/90 text-sm backdrop-blur">
              {{ profileImageErrorMessage }}
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</section>

